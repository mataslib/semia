import{w as e,i as t,S as n,a as r,s as o,e as s,t as a,b as i,c as l,d as c,f as u,g as $,h as m,j as d,k as f,l as p,m as h,n as g,p as v,u as w,o as b,q as y,r as x,v as E,x as I,y as k,z as S,A as T,B as D,C,D as O,E as V,F as R,G as A,H as j,I as B,J as N,K as L,L as M,M as _,N as q,O as U,P,Q as H,R as J,T as G,U as z,V as F,W,X,Y as K,Z as Q,_ as Y,$ as Z,a0 as ee,a1 as te,a2 as ne,a3 as re,a4 as oe,a5 as se,a6 as ae,a7 as ie,a8 as le,a9 as ce,aa as ue,ab as $e,ac as me,ad as de,ae as fe,af as pe,ag as he,ah as ge,ai as ve}from"./vendor.2546c53b.js";const we="localhost:8086",be=e(t(`ws://${we}`,{transports:["websocket"]}));const ye=function(){const{subscribe:t,set:n}=e(null,(e=>{e(JSON.parse(window.sessionStorage.getItem("token")))}));return{subscribe:t,set:e=>{window.sessionStorage.setItem("token",JSON.stringify(e)),n(e)}}}(),xe=e(!1),Ee=e(null);ye.subscribe((e=>{if(e){const n=t(`ws://${we}/user`,{transports:["websocket"],auth:{token:e}});n.on("connect",(()=>{xe.set(!0)})),n.on("connect_error",(e=>{console.log(e.message)})),Ee.set(n)}}));function Ie(e,t,n){const r=e.slice();return r[14]=t[n],r}function ke(e){let t,n,r,o=e[14].file.name+"";return{c(){t=s("a"),n=a(o),this.h()},l(e){t=l(e,"A",{target:!0,href:!0});var r=c(t);n=u(r,o),r.forEach(m),this.h()},h(){d(t,"target","_blank"),d(t,"href",r=`http://${we}/${e[14].file.path}`)},m(e,r){f(e,t,r),p(t,n)},p(e,s){1&s&&o!==(o=e[14].file.name+"")&&h(n,o),1&s&&r!==(r=`http://${we}/${e[14].file.path}`)&&d(t,"href",r)},d(e){e&&m(t)}}}function Se(e,t){let n,r,o,g,v,w,b,y,x,E,I=t[14].userName+"",k=new Date(t[14].createdAt).toLocaleString()+"",S=t[14].message+"",T=t[14].file&&ke(t);return{key:e,first:null,c(){n=s("div"),r=s("div"),o=a(I),g=i(),v=a(k),w=s("br"),b=i(),y=s("div"),x=a(S),E=i(),T&&T.c(),this.h()},l(e){n=l(e,"DIV",{class:!0});var t=c(n);r=l(t,"DIV",{class:!0});var s=c(r);o=u(s,I),g=$(s),v=u(s,k),w=l(s,"BR",{}),s.forEach(m),b=$(t),y=l(t,"DIV",{class:!0});var a=c(y);x=u(a,S),E=$(a),T&&T.l(a),a.forEach(m),t.forEach(m),this.h()},h(){d(r,"class","msg-header svelte-w6cqjs"),d(y,"class","msg-body svelte-w6cqjs"),d(n,"class","msg"),this.first=n},m(e,t){f(e,n,t),p(n,r),p(r,o),p(r,g),p(r,v),p(r,w),p(n,b),p(n,y),p(y,x),p(y,E),T&&T.m(y,null)},p(e,n){t=e,1&n&&I!==(I=t[14].userName+"")&&h(o,I),1&n&&k!==(k=new Date(t[14].createdAt).toLocaleString()+"")&&h(v,k),1&n&&S!==(S=t[14].message+"")&&h(x,S),t[14].file?T?T.p(t,n):(T=ke(t),T.c(),T.m(y,null)):T&&(T.d(1),T=null)},d(e){e&&m(n),T&&T.d()}}}function Te(e){let t,n,r,o,x,E,I,k,S,T,D,C,O,V,R,A,j,B,N=[],L=new Map,M=e[0];const _=e=>e[14]._id;for(let s=0;s<M.length;s+=1){let t=Ie(e,M,s),n=_(t);L.set(n,N[s]=Se(n,t))}return{c(){t=s("div"),n=s("div");for(let e=0;e<N.length;e+=1)N[e].c();r=i(),o=a(e[2]),x=i(),E=s("div"),I=s("form"),k=s("textarea"),S=i(),T=s("input"),D=i(),C=s("button"),O=a("Send"),V=i(),R=s("div"),A=a(e[1]),this.h()},l(s){t=l(s,"DIV",{class:!0});var a=c(t);n=l(a,"DIV",{class:!0});var i=c(n);for(let e=0;e<N.length;e+=1)N[e].l(i);r=$(i),o=u(i,e[2]),i.forEach(m),a.forEach(m),x=$(s),E=l(s,"DIV",{class:!0});var d=c(E);I=l(d,"FORM",{class:!0});var f=c(I);k=l(f,"TEXTAREA",{}),c(k).forEach(m),S=$(f),T=l(f,"INPUT",{type:!0}),D=$(f),C=l(f,"BUTTON",{});var p=c(C);O=u(p,"Send"),p.forEach(m),V=$(f),R=l(f,"DIV",{});var h=c(R);A=u(h,e[1]),h.forEach(m),f.forEach(m),d.forEach(m),this.h()},h(){d(n,"class","msgs svelte-w6cqjs"),d(t,"class","chat svelte-w6cqjs"),d(T,"type","file"),d(I,"class","chatform svelte-w6cqjs"),d(E,"class","chatform-container svelte-w6cqjs")},m(s,a){f(s,t,a),p(t,n);for(let e=0;e<N.length;e+=1)N[e].m(n,null);p(n,r),p(n,o),e[8](n),f(s,x,a),f(s,E,a),p(E,I),p(I,k),e[9](k),p(I,S),p(I,T),e[10](T),p(I,D),p(I,C),p(C,O),p(I,V),p(I,R),p(R,A),e[11](I),j||(B=g(I,"submit",v(e[7])),j=!0)},p(e,[t]){1&t&&(M=e[0],N=w(N,t,_,1,e,M,L,n,b,Se,r,Ie)),4&t&&h(o,e[2]),2&t&&h(A,e[1])},i:y,o:y,d(n){n&&m(t);for(let e=0;e<N.length;e+=1)N[e].d();e[8](null),n&&m(x),n&&m(E),e[9](null),e[10](null),e[11](null),j=!1,B()}}}function De(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function i(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}l((r=r.apply(e,t||[])).next())}))};const o=x("roomSocket");let s,a,i,l,c=[],u="",$="";return E((()=>{o.emit("room:messages",(e=>{"result"in e?n(0,c=e.result):n(2,$=e.error.message)})),o.on("room:newMessage",(e=>r(void 0,void 0,void 0,(function*(){console.log("room:newMessage",e),n(0,c=[...c,e.message]),yield I(),n(3,s.scrollTop=s.scrollHeight,s)}))))})),[c,u,$,s,a,i,l,function(e){return r(this,void 0,void 0,(function*(){if(!i.value&&!l.value)return;let e={};if(l.value){const t=new FileReader;e={file:{data:yield new Promise(((e,n)=>{t.onload=t=>e(t.target.result),t.readAsArrayBuffer(l.files[0])})),name:l.files[0].name,extension:l.files[0].name.substring(l.files[0].name.lastIndexOf(".")+1)}}}const t=Object.assign({message:i.value},e);o.emit("room:createMessage",t,(e=>{"result"in e?a.reset():n(1,u=e.error.message)}))}))},function(e){k[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){k[e?"unshift":"push"]((()=>{i=e,n(5,i)}))},function(e){k[e?"unshift":"push"]((()=>{l=e,n(6,l)}))},function(e){k[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class Ce extends n{constructor(e){super(),r(this,e,De,Te,o,{})}}function Oe(e){let t,n,r,o;const a=e[1].default,i=S(a,e,e[0],null);return{c(){t=s("button"),i&&i.c(),this.h()},l(e){t=l(e,"BUTTON",{class:!0});var n=c(t);i&&i.l(n),n.forEach(m),this.h()},h(){d(t,"class","svelte-1ck1x95")},m(s,a){f(s,t,a),i&&i.m(t,null),n=!0,r||(o=g(t,"click",e[2]),r=!0)},p(e,[t]){i&&i.p&&(!n||1&t)&&T(i,a,e,e[0],t,null,null)},i(e){n||(D(i,e),n=!0)},o(e){C(i,e),n=!1},d(e){e&&m(t),i&&i.d(e),r=!1,o()}}}function Ve(e,t,n){let{$$slots:r={},$$scope:o}=t;return e.$$set=e=>{"$$scope"in e&&n(0,o=e.$$scope)},[o,r,function(t){O(e,t)}]}class Re extends n{constructor(e){super(),r(this,e,Ve,Oe,o,{})}}function Ae(e){let t,n,r,o;const a=e[2].default,i=S(a,e,e[1],null);return{c(){t=s("div"),n=s("div"),r=s("div"),i&&i.c(),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=c(t);n=l(o,"DIV",{class:!0});var s=c(n);r=l(s,"DIV",{class:!0});var a=c(r);i&&i.l(a),a.forEach(m),s.forEach(m),o.forEach(m),this.h()},h(){d(r,"class","modal svelte-2u8i53"),d(n,"class","modal-padding svelte-2u8i53"),d(t,"class","modal-container svelte-2u8i53"),V(t,"isOpen",e[0])},m(e,s){f(e,t,s),p(t,n),p(n,r),i&&i.m(r,null),o=!0},p(e,[n]){i&&i.p&&(!o||2&n)&&T(i,a,e,e[1],n,null,null),1&n&&V(t,"isOpen",e[0])},i(e){o||(D(i,e),o=!0)},o(e){C(i,e),o=!1},d(e){e&&m(t),i&&i.d(e)}}}function je(e,t,n){let{$$slots:r={},$$scope:o}=t,{isOpen:s=!1}=t;return e.$$set=e=>{"isOpen"in e&&n(0,s=e.isOpen),"$$scope"in e&&n(1,o=e.$$scope)},[s,o,r]}class Be extends n{constructor(e){super(),r(this,e,je,Ae,o,{isOpen:0})}}async function Ne(t){const n=()=>async function(e){return(await navigator.mediaDevices.enumerateDevices()).filter((t=>t.kind===e))}(t);"audioinput"!==t&&"videoinput"!==t||await async function(e){(await navigator.mediaDevices.getUserMedia(e)).getTracks().forEach((e=>e.stop()))}({video:"videoinput"===t,audio:"audioinput"===t});const r=await n(),o=e(r);return navigator.mediaDevices.addEventListener("devicechange",(e=>{var t;t=o.set,n().then((e=>t(e)))})),o}let Le={};function Me(e,t,n){const r=e.slice();return r[4]=t[n],r}function _e(e){let t,n,r,o=e[4].label+"";return{c(){t=s("option"),n=a(o),this.h()},l(e){t=l(e,"OPTION",{value:!0});var r=c(t);n=u(r,o),r.forEach(m),this.h()},h(){t.__value=r=e[4].value,t.value=t.__value},m(e,r){f(e,t,r),p(t,n)},p(e,s){1&s&&o!==(o=e[4].label+"")&&h(n,o),1&s&&r!==(r=e[4].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&m(t)}}}function qe(e){let t,n,r,o=e[0],a=[];for(let s=0;s<o.length;s+=1)a[s]=_e(Me(e,o,s));let i=[e[1]],u={};for(let s=0;s<i.length;s+=1)u=R(u,i[s]);return{c(){t=s("select");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=l(e,"SELECT",{});var n=c(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(m),this.h()},h(){A(t,u)},m(o,s){f(o,t,s);for(let e=0;e<a.length;e+=1)a[e].m(t,null);u.multiple&&j(t,u.value),n||(r=[g(t,"input",e[2]),g(t,"blur",e[3])],n=!0)},p(e,[n]){if(1&n){let r;for(o=e[0],r=0;r<o.length;r+=1){const s=Me(e,o,r);a[r]?a[r].p(s,n):(a[r]=_e(s),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}A(t,u=B(i,[2&n&&e[1]])),2&n&&u.multiple&&j(t,u.value)},i:y,o:y,d(e){e&&m(t),N(a,e),n=!1,L(r)}}}function Ue(e,t,n){const r=["options"];let o=M(t,r),{options:s=[]}=t;return s=s.map((e=>"string"==typeof e?{label:e,value:e}:e)),e.$$set=e=>{t=R(R({},t),_(e)),n(1,o=M(t,r)),"options"in e&&n(0,s=e.options)},[s,o,function(t){O(e,t)},function(t){O(e,t)}]}class Pe extends n{constructor(e){super(),r(this,e,Ue,qe,o,{options:0})}}function He(e){let t,n;return t=new Pe({props:{options:e[0]}}),t.$on("input",e[5]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.options=e[0]),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Je(e){let t;return{c(){t=a("Getting devices...")},l(e){t=u(e,"Getting devices...")},m(e,n){f(e,t,n)},p:y,i:y,o:y,d(e){e&&m(t)}}}function Ge(e){let t,n,r,o;const s=[Je,He],a=[];function i(e,t){return e[1]?0:1}return t=i(e),n=a[t]=s[t](e),{c(){n.c(),r=q()},l(e){n.l(e),r=q()},m(e,n){a[t].m(e,n),f(e,r,n),o=!0},p(e,[o]){let l=t;t=i(e),t===l?a[t].p(e,o):(U(),C(a[l],1,1,(()=>{a[l]=null})),P(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),D(n,1),n.m(r.parentNode,r))},i(e){o||(D(n),o=!0)},o(e){C(n),o=!1},d(e){a[t].d(e),e&&m(r)}}}function ze(e,t,n){let r,o=y;e.$$.on_destroy.push((()=>o()));let{kind:s}=t,a=!0,i=[];const l={label:"",value:""};let c;return async function(e){if(Le[e])return Le[e];const t=await Ne(e);return Le[e]=t,Le[e]}(s).then((e=>{n(2,c=e),o(),o=H(c,(e=>n(4,r=e))),n(1,a=!1)})),e.$$set=e=>{"kind"in e&&n(3,s=e.kind)},e.$$.update=()=>{16&e.$$.dirty&&r&&n(0,i=[l,...r.map((e=>({label:e.label?e.label:e.deviceId,value:e.deviceId})))]),1&e.$$.dirty&&console.log(i)},[i,a,c,s,r,function(t){O(e,t)}]}class Fe extends n{constructor(e){super(),r(this,e,ze,Ge,o,{kind:3})}}function We(e){let t,n,r;const o=[e[1]];var s=e[0];function a(e){let t={};for(let n=0;n<o.length;n+=1)t=R(t,o[n]);return{props:t}}return s&&(t=new s(a()),e[4](t)),{c(){t&&J(t.$$.fragment),n=q()},l(e){t&&G(t.$$.fragment,e),n=q()},m(e,o){t&&z(t,e,o),f(e,n,o),r=!0},p(e,[r]){const i=2&r?B(o,[W(e[1])]):{};if(s!==(s=e[0])){if(t){U();const e=t;C(e.$$.fragment,1,0,(()=>{F(e,1)})),P()}s?(t=new s(a()),e[4](t),J(t.$$.fragment),D(t.$$.fragment,1),z(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&D(t.$$.fragment,e),r=!0)},o(e){t&&C(t.$$.fragment,e),r=!1},d(r){e[4](null),r&&m(n),t&&F(t,r)}}}function Xe(e,t,n){let r,{component:o}=t,{listeners:s=[]}=t,{props:a={}}=t;return e.$$set=e=>{"component"in e&&n(0,o=e.component),"listeners"in e&&n(3,s=e.listeners),"props"in e&&n(1,a=e.props)},e.$$.update=()=>{if(12&e.$$.dirty&&r&&s)for(let[e,t]of s)r.$on(e,t)},[o,a,r,s,function(e){k[e?"unshift":"push"]((()=>{r=e,n(2,r)}))}]}class Ke extends n{constructor(e){super(),r(this,e,Xe,We,o,{component:0,listeners:3,props:1})}}function Qe(e){let t,n,r,o=[e[0]],a={};for(let s=0;s<o.length;s+=1)a=R(a,o[s]);return{c(){t=s("input"),this.h()},l(e){t=l(e,"INPUT",{}),this.h()},h(){A(t,a)},m(o,s){f(o,t,s),n||(r=[g(t,"input",e[1]),g(t,"blur",e[2])],n=!0)},p(e,[n]){A(t,a=B(o,[1&n&&e[0]]))},i:y,o:y,d(e){e&&m(t),n=!1,L(r)}}}function Ye(e,t,n){const r=[];let o=M(t,r);return e.$$set=e=>{t=R(R({},t),_(e)),n(0,o=M(t,r))},[o,function(t){O(e,t)},function(t){O(e,t)}]}class Ze extends n{constructor(e){super(),r(this,e,Ye,Qe,o,{})}}function et(e){let t,n,r,o;return{c(){t=s("label"),n=a(e[1]),r=i(),o=s("br"),this.h()},l(s){t=l(s,"LABEL",{for:!0});var a=c(t);n=u(a,e[1]),r=$(a),a.forEach(m),o=l(s,"BR",{}),this.h()},h(){d(t,"for",e[0])},m(e,s){f(e,t,s),p(t,n),p(t,r),f(e,o,s)},p(e,r){2&r&&h(n,e[1]),1&r&&d(t,"for",e[0])},d(e){e&&m(t),e&&m(o)}}}function tt(e){let t,n;const r=[{id:e[0]},e[7]];let o={};for(let s=0;s<r.length;s+=1)o=R(o,r[s]);return t=new Ze({props:o}),t.$on("input",e[10]),t.$on("blur",e[11]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const o=129&n?B(r,[1&n&&{id:e[0]},128&n&&W(e[7])]):{};t.$set(o)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function nt(e){var t,n,r,o;let s,a;return s=new Ke({props:{component:e[5].component.component,props:null!=(n=null==(t=e[5].component)?void 0:t.props)?n:{},listeners:null!=(o=null==(r=e[5].component)?void 0:r.listeners)?o:[]}}),{c(){J(s.$$.fragment)},l(e){G(s.$$.fragment,e)},m(e,t){z(s,e,t),a=!0},p(e,t){var n,r,o,a;const i={};32&t&&(i.component=e[5].component.component),32&t&&(i.props=null!=(r=null==(n=e[5].component)?void 0:n.props)?r:{}),32&t&&(i.listeners=null!=(a=null==(o=e[5].component)?void 0:o.listeners)?a:[]),s.$set(i)},i(e){a||(D(s.$$.fragment,e),a=!0)},o(e){C(s.$$.fragment,e),a=!1},d(e){F(s,e)}}}function rt(e){let t,n;const r=[{id:e[0]},e[7]];let o={};for(let s=0;s<r.length;s+=1)o=R(o,r[s]);return t=new Select({props:o}),t.$on("input",e[8]),t.$on("blur",e[9]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const o=129&n?B(r,[1&n&&{id:e[0]},128&n&&W(e[7])]):{};t.$set(o)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function ot(e){let t,n;return{c(){t=s("div"),n=a(e[2])},l(r){t=l(r,"DIV",{});var o=c(t);n=u(o,e[2]),o.forEach(m)},m(e,r){f(e,t,r),p(t,n)},p(e,t){4&t&&h(n,e[2])},d(e){e&&m(t)}}}function st(e){let t,n,r,o,a,u,h=e[1]&&et(e);const g=[rt,nt,tt],v=[];function w(e,t){return"select"===e[6]?0:e[5].component?1:2}r=w(e),o=v[r]=g[r](e);let b=e[2]&&(e[4]||e[3])&&ot(e);return{c(){t=s("div"),h&&h.c(),n=i(),o.c(),a=i(),b&&b.c(),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=c(t);h&&h.l(r),n=$(r),o.l(r),a=$(r),b&&b.l(r),r.forEach(m),this.h()},h(){d(t,"class","formfield svelte-1lujr51")},m(e,o){f(e,t,o),h&&h.m(t,null),p(t,n),v[r].m(t,null),p(t,a),b&&b.m(t,null),u=!0},p(e,[s]){e[1]?h?h.p(e,s):(h=et(e),h.c(),h.m(t,n)):h&&(h.d(1),h=null);let i=r;r=w(e),r===i?v[r].p(e,s):(U(),C(v[i],1,1,(()=>{v[i]=null})),P(),o=v[r],o?o.p(e,s):(o=v[r]=g[r](e),o.c()),D(o,1),o.m(t,a)),e[2]&&(e[4]||e[3])?b?b.p(e,s):(b=ot(e),b.c(),b.m(t,null)):b&&(b.d(1),b=null)},i(e){u||(D(o),u=!0)},o(e){C(o),u=!1},d(e){e&&m(t),h&&h.d(),v[r].d(),b&&b.d()}}}function at(e,t,n){const r=["label","error","touched","submitted","id","input"];let o=M(t,r),{label:s}=t,{error:a}=t,{touched:i=!1}=t,{submitted:l=!1}=t,{id:c}=t,{input:u={}}=t,$=o.type;return c=null!=c?c:X(),e.$$set=e=>{t=R(R({},t),_(e)),n(7,o=M(t,r)),"label"in e&&n(1,s=e.label),"error"in e&&n(2,a=e.error),"touched"in e&&n(3,i=e.touched),"submitted"in e&&n(4,l=e.submitted),"id"in e&&n(0,c=e.id),"input"in e&&n(5,u=e.input)},[c,s,a,i,l,u,$,o,function(t){O(e,t)},function(t){O(e,t)},function(t){O(e,t)},function(t){O(e,t)}]}class it extends n{constructor(e){super(),r(this,e,at,st,o,{label:1,error:2,touched:3,submitted:4,id:0,input:5})}}function lt(e){let t;function n(e,t){return e[2]?ut:ct}let r=n(e),o=r(e);return{c(){o.c(),t=q()},l(e){o.l(e),t=q()},m(e,n){o.m(e,n),f(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&m(t)}}}function ct(e){let t;return{c(){t=s("audio"),this.h()},l(e){t=l(e,"AUDIO",{autoplay:!0,playsinline:!0,controls:!0}),c(t).forEach(m),this.h()},h(){t.autoplay=!0,d(t,"playsinline",""),t.controls=!0},m(n,r){f(n,t,r),e[10](t)},p:y,d(n){n&&m(t),e[10](null)}}}function ut(e){let t;return{c(){t=s("video"),this.h()},l(e){t=l(e,"VIDEO",{autoplay:!0,playsinline:!0,controls:!0}),c(t).forEach(m),this.h()},h(){t.autoplay=!0,t.playsInline=!0,t.controls=!0},m(n,r){f(n,t,r),e[9](t)},p:y,d(n){n&&m(t),e[9](null)}}}function $t(e){let t;return{c(){t=a("loading device...")},l(e){t=u(e,"loading device...")},m(e,n){f(e,t,n)},p:y,i:y,o:y,d(e){e&&m(t)}}}function mt(e){let t,n;return t=new Re({props:{$$slots:{default:[dt]},$$scope:{ctx:e}}}),t.$on("click",e[5]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};8192&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function dt(e){let t;return{c(){t=a("Join")},l(e){t=u(e,"Join")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function ft(e){let t,n,r,o,h,g,v,w,b,y,x,E,I,k,S,T;w=new it({props:{label:"Audio In",input:{component:{component:Fe,props:{kind:"audioinput"},listeners:[["input",e[7]]]}}}}),y=new it({props:{label:"Camera",input:{component:{component:Fe,props:{kind:"videoinput"},listeners:[["input",e[8]]]}}}});let O=!e[4]&&lt(e);const V=[mt,$t],R=[];function A(e,t){return e[3]?1:0}return k=A(e),S=R[k]=V[k](e),{c(){t=s("div"),n=s("p"),r=a('There are device (camera, microphone) identificators showed in select boxes\r\n    ("random" mixed characters and numbers) until permanent device permission is\r\n    given.'),o=s("br"),h=s("br"),g=a(" After you permanently allow device, you will see device labels\r\n    (names) next time, or after browser refresh."),v=i(),J(w.$$.fragment),b=i(),J(y.$$.fragment),x=i(),E=s("div"),O&&O.c(),I=i(),S.c(),this.h()},l(e){t=l(e,"DIV",{class:!0});var s=c(t);n=l(s,"P",{});var a=c(n);r=u(a,'There are device (camera, microphone) identificators showed in select boxes\r\n    ("random" mixed characters and numbers) until permanent device permission is\r\n    given.'),o=l(a,"BR",{}),h=l(a,"BR",{}),g=u(a," After you permanently allow device, you will see device labels\r\n    (names) next time, or after browser refresh."),a.forEach(m),v=$(s),G(w.$$.fragment,s),b=$(s),G(y.$$.fragment,s),x=$(s),E=l(s,"DIV",{class:!0});var i=c(E);O&&O.l(i),i.forEach(m),I=$(s),S.l(s),s.forEach(m),this.h()},h(){d(E,"class","preview svelte-1cv73ia"),d(t,"class","joinroom")},m(e,s){f(e,t,s),p(t,n),p(n,r),p(n,o),p(n,h),p(n,g),p(t,v),z(w,t,null),p(t,b),z(y,t,null),p(t,x),p(t,E),O&&O.m(E,null),p(t,I),R[k].m(t,null),T=!0},p(e,[n]){const r={};2&n&&(r.input={component:{component:Fe,props:{kind:"audioinput"},listeners:[["input",e[7]]]}}),w.$set(r);const o={};4&n&&(o.input={component:{component:Fe,props:{kind:"videoinput"},listeners:[["input",e[8]]]}}),y.$set(o),e[4]?O&&(O.d(1),O=null):O?O.p(e,n):(O=lt(e),O.c(),O.m(E,null));let s=k;k=A(e),k===s?R[k].p(e,n):(U(),C(R[s],1,1,(()=>{R[s]=null})),P(),S=R[k],S?S.p(e,n):(S=R[k]=V[k](e),S.c()),D(S,1),S.m(t,null))},i(e){T||(D(w.$$.fragment,e),D(y.$$.fragment,e),D(S),T=!0)},o(e){C(w.$$.fragment,e),C(y.$$.fragment,e),C(S),T=!1},d(e){e&&m(t),F(w),F(y),O&&O.d(),R[k].d()}}}function pt(e,t,n){let r;const o=K();let s,a,i,l=new MediaStream,c=!1;return e.$$.update=()=>{6&e.$$.dirty&&function(e,t){n(3,c=!0);let r={};e&&(r.audio={deviceId:e,echoCancellation:!0}),t&&(r.video={deviceId:t,height:{exact:480},aspectRatio:{exact:4/3}}),Object.keys(r).length?navigator.mediaDevices.getUserMedia(r).then((e=>{n(6,l=e)})).finally((()=>n(3,c=!1))):(n(6,l=new MediaStream),n(3,c=!1))}(a,i),65&e.$$.dirty&&function(e,t){e&&(e.srcObject=t)}(s,l),64&e.$$.dirty&&n(4,r=0===l.getTracks().length)},[s,a,i,c,r,function(){o("joinAction",l)},l,e=>n(1,a=e.target.value),e=>n(2,i=e.target.value),function(e){k[e?"unshift":"push"]((()=>{s=e,n(0,s)}))},function(e){k[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class ht extends n{constructor(e){super(),r(this,e,pt,ft,o,{})}}function gt(e){let t,n,r,o=e[4]()+"";return{c(){t=s("video"),n=i(),r=a(o),this.h()},l(e){t=l(e,"VIDEO",{autoplay:!0,playsinline:!0,controls:!0}),c(t).forEach(m),n=$(e),r=u(e,o),this.h()},h(){t.autoplay=!0,t.playsInline=!0,t.controls=!0},m(o,s){f(o,t,s),e[6](t),f(o,n,s),f(o,r,s)},p:y,d(o){o&&m(t),e[6](null),o&&m(n),o&&m(r)}}}function vt(e){let t,n,r,o=e[0]&&gt(e);return{c(){t=s("div"),o&&o.c(),this.h()},l(e){t=l(e,"DIV",{class:!0});var n=c(t);o&&o.l(n),n.forEach(m),this.h()},h(){d(t,"class","meetingitem")},m(s,a){f(s,t,a),o&&o.m(t,null),e[7](t),n||(r=g(window,"resize",(function(){Q(e[3])&&e[3].apply(this,arguments)})),n=!0)},p(n,[r]){(e=n)[0]?o?o.p(e,r):(o=gt(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:y,o:y,d(s){s&&m(t),o&&o.d(),e[7](null),n=!1,r()}}}function wt(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function i(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}l((r=r.apply(e,t||[])).next())}))};let o,s,a,{stream:i}=t,{streamHasTracks:l=!0}=t;return e.$$set=e=>{"stream"in e&&n(5,i=e.stream),"streamHasTracks"in e&&n(0,l=e.streamHasTracks)},[l,o,s,a,function(){return(()=>{r(this,void 0,void 0,(function*(){yield I(),n(2,s.srcObject=i,s),function(){let e=setTimeout((()=>{}),0);n(3,a=()=>{o&&(clearTimeout(e),e=setTimeout((()=>{var e;n(1,o.style.width=`${null!==(e=null==s?void 0:s.offsetWidth)&&void 0!==e?e:0}px`,o)}),25))}),s&&(s.addEventListener("loadstart",a),s.addEventListener("loadeddata",a),s.addEventListener("resize",a))}()}))})(),""},i,function(e){k[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},function(e){k[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class bt extends n{constructor(e){super(),r(this,e,wt,vt,o,{stream:5,streamHasTracks:0})}}const yt={};class xt{constructor(e){const{signaler:t,polite:n}=e;this.wrapped=new RTCPeerConnection(yt);const r=this.wrapped;let o=!1;r.onnegotiationneeded=async()=>{try{o=!0,await r.setLocalDescription(),t.send({description:r.localDescription})}catch(e){console.error(e)}finally{o=!1}},r.onicecandidate=({candidate:e})=>{t.send({candidate:e})};let s=!1;this.onmessage=async e=>{const{description:a,candidate:i}=e;try{if(a){const e="offer"==a.type&&(o||"stable"!=r.signalingState);if(s=!n&&e,s)return;await r.setRemoteDescription(a),"offer"==a.type&&(await r.setLocalDescription(),t.send({description:r.localDescription}))}else if(i)try{await r.addIceCandidate(i)}catch(l){if(!s)throw l}}catch(l){console.error(l)}}}handleSignalMessage(e){this.onmessage(e)}}function Et(e,t,n){const r=e.slice();return r[24]=t[n][0],r[25]=t[n][1],r}function It(e){let t,n,r,o,i=e[4]?"Pause video":"Resume video";return{c(){t=s("button"),n=a(i)},l(e){t=l(e,"BUTTON",{});var r=c(t);n=u(r,i),r.forEach(m)},m(s,a){f(s,t,a),p(t,n),r||(o=g(t,"click",e[10]),r=!0)},p(e,t){16&t&&i!==(i=e[4]?"Pause video":"Resume video")&&h(n,i)},d(e){e&&m(t),r=!1,o()}}}function kt(e){let t,n,r,o,i=e[5]?"Mute":"Unmute";return{c(){t=s("button"),n=a(i)},l(e){t=l(e,"BUTTON",{});var r=c(t);n=u(r,i),r.forEach(m)},m(s,a){f(s,t,a),p(t,n),r||(o=g(t,"click",e[9]),r=!0)},p(e,t){32&t&&i!==(i=e[5]?"Mute":"Unmute")&&h(n,i)},d(e){e&&m(t),r=!1,o()}}}function St(e){let t,n;return{c(){t=s("div"),n=a("Not streaming member. \r\n    ")},l(e){t=l(e,"DIV",{});var r=c(t);n=u(r,"Not streaming member. \r\n    "),r.forEach(m)},m(e,r){f(e,t,r),p(t,n)},p:y,i:y,o:y,d(e){e&&m(t)}}}function Tt(e){let t,n;return t=new bt({props:{stream:e[25].stream}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.stream=e[25].stream),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Dt(e,t){let n,r,o,s,a;const i=[Tt,St],l=[];function c(e,t){return e[25].stream?0:1}return r=c(t),o=l[r]=i[r](t),{key:e,first:null,c(){n=q(),o.c(),s=q(),this.h()},l(e){n=q(),o.l(e),s=q(),this.h()},h(){this.first=n},m(e,t){f(e,n,t),l[r].m(e,t),f(e,s,t),a=!0},p(e,n){let a=r;r=c(t=e),r===a?l[r].p(t,n):(U(),C(l[a],1,1,(()=>{l[a]=null})),P(),o=l[r],o?o.p(t,n):(o=l[r]=i[r](t),o.c()),D(o,1),o.m(s.parentNode,s))},i(e){a||(D(o),a=!0)},o(e){C(o),a=!1},d(e){e&&m(n),l[r].d(e),e&&m(s)}}}function Ct(e){let t,n,r,o,v,b,y,x,E,I,k,S=e[3]?"Stop sharing":"Share screen",T=[],O=new Map;t=new bt({props:{streamHasTracks:e[7],stream:e[0]}});let V=e[1]&&!e[3]&&It(e),R=e[2]&&kt(e),A=Object.entries(e[6]);const j=e=>e[24];for(let s=0;s<A.length;s+=1){let t=Et(e,A,s),n=j(t);O.set(n,T[s]=Dt(n,t))}return{c(){J(t.$$.fragment),n=i(),r=s("button"),o=a(S),v=i(),V&&V.c(),b=i(),R&&R.c(),y=i();for(let e=0;e<T.length;e+=1)T[e].c();x=q(),this.h()},l(e){G(t.$$.fragment,e),n=$(e),r=l(e,"BUTTON",{class:!0});var s=c(r);o=u(s,S),s.forEach(m),v=$(e),V&&V.l(e),b=$(e),R&&R.l(e),y=$(e);for(let t=0;t<T.length;t+=1)T[t].l(e);x=q(),this.h()},h(){d(r,"class","screenshare")},m(s,a){z(t,s,a),f(s,n,a),f(s,r,a),p(r,o),f(s,v,a),V&&V.m(s,a),f(s,b,a),R&&R.m(s,a),f(s,y,a);for(let e=0;e<T.length;e+=1)T[e].m(s,a);f(s,x,a),E=!0,I||(k=g(r,"click",e[8]),I=!0)},p(e,[n]){const r={};128&n&&(r.streamHasTracks=e[7]),1&n&&(r.stream=e[0]),t.$set(r),(!E||8&n)&&S!==(S=e[3]?"Stop sharing":"Share screen")&&h(o,S),e[1]&&!e[3]?V?V.p(e,n):(V=It(e),V.c(),V.m(b.parentNode,b)):V&&(V.d(1),V=null),e[2]?R?R.p(e,n):(R=kt(e),R.c(),R.m(y.parentNode,y)):R&&(R.d(1),R=null),64&n&&(A=Object.entries(e[6]),U(),T=w(T,n,j,1,e,A,O,x.parentNode,Y,Dt,x,Et),P())},i(e){if(!E){D(t.$$.fragment,e);for(let e=0;e<A.length;e+=1)D(T[e]);E=!0}},o(e){C(t.$$.fragment,e);for(let t=0;t<T.length;t+=1)C(T[t]);E=!1},d(e){F(t,e),e&&m(n),e&&m(r),e&&m(v),V&&V.d(e),e&&m(b),R&&R.d(e),e&&m(y);for(let t=0;t<T.length;t+=1)T[t].d(e);e&&m(x),I=!1,k()}}}function Ot(e,t,n){let r;var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function i(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}l((r=r.apply(e,t||[])).next())}))};let s,a,{mediaStream:i}=t;a=i.getAudioTracks()[0],s=i.getVideoTracks()[0];let l=!1,c=void 0!==s,u=void 0!==a;const $=x("roomSocket"),m=K();let d={};function f(e){const{polite:t,connectionId:r,to:o}=e,l=function(e){return new xt(e)}({signaler:function(e){const{to:t,connectionId:n}=e;return{send:e=>{$.emit("wrtc:signal",Object.assign(Object.assign({},e),{to:t,connectionId:n}))}}}({to:o,connectionId:r}),polite:t});let c={peerConnection:l,connectionId:r};const u=function(e){const{connection:t}=e;return e=>{console.log("state change",t.peerConnection.wrapped.connectionState,t.peerConnection.wrapped.iceConnectionState,t.peerConnection.wrapped.iceGatheringState),"failed"!==t.peerConnection.wrapped.connectionState&&"failed"!==t.peerConnection.wrapped.iceConnectionState||(delete d[t.connectionId],n(6,d))}}({connection:c}),m=function(e){const{connection:t}=e;return({streams:e})=>{n(6,d[t.connectionId].stream=e[0],d)}}({connection:c});return l.wrapped.addEventListener("track",m),l.wrapped.addEventListener("connectionstatechange",u),l.wrapped.addEventListener("iceconnectionstatechange",u),a&&(c.audioSender=l.wrapped.addTrack(a,i)),s&&(c.videoSender=l.wrapped.addTrack(s,i)),n(6,d[r]=c,d),c}function p(){return o(this,void 0,void 0,(function*(){i.getVideoTracks().forEach((e=>{e.stop(),i.removeTrack(e)})),s&&i.addTrack(s),Object.entries(d).forEach((([e,t])=>{t.videoSender?(console.log("VideoSender"),t.videoSender.replaceTrack(s)):(console.log("Not videoSender"),t.videoSender=t.peerConnection.wrapped.addTrack(s,i))})),n(3,l=!1)}))}return function(){o(this,void 0,void 0,(function*(){!function(){const e={};$.emit("room:joinMeeting",e,(e=>{"error"in e&&m("error",e.error.message)}))}(),function(){$.on("wrtc:send-offer",(e=>o(this,void 0,void 0,(function*(){const{to:t,connectionId:n}=e;f({polite:!1,to:t,connectionId:n}).peerConnection.wrapped.createDataChannel("dummy")}))))}(),function(){$.on("wrtc:signal",(e=>o(this,void 0,void 0,(function*(){var t;const{from:n,connectionId:r}=e;let o=null===(t=d[r])||void 0===t?void 0:t.peerConnection;if(!o){o=f({polite:!0,to:n,connectionId:r}).peerConnection}o.handleSignalMessage(e)}))))}()}))}(),Z((()=>{$.emit("room:leaveMeeting",{}),i.getTracks().forEach((e=>e.stop())),Object.entries(d).forEach((([e,t])=>{t.peerConnection.wrapped.close(),console.log("closed peer connection")})),n(6,d={}),$.off("wrtc:send-offer"),$.off("wrtc:signal")})),e.$$set=e=>{"mediaStream"in e&&n(0,i=e.mediaStream)},e.$$.update=()=>{14&e.$$.dirty&&n(7,r=!!s||!!a||!!l)},[i,s,a,l,c,u,d,r,function(){return o(this,void 0,void 0,(function*(){l?p():function(){o(this,void 0,void 0,(function*(){try{let e=(yield navigator.mediaDevices.getDisplayMedia({})).getVideoTracks()[0];e.onended=()=>{p()},i.getVideoTracks().forEach((e=>{i.removeTrack(e)})),console.log("addtrack"),i.addTrack(e),Object.entries(d).forEach((([t,n])=>{n.videoSender?(console.log("VideoSender"),n.videoSender.replaceTrack(e)):(console.log("Not videoSender"),n.videoSender=n.peerConnection.wrapped.addTrack(e,i))})),n(3,l=!0)}catch(e){console.error(e)}}))}()}))},function(){return o(this,void 0,void 0,(function*(){n(2,a.enabled=!u,a),n(5,u=!u)}))},function(){return o(this,void 0,void 0,(function*(){n(1,s.enabled=!c,s),n(4,c=!c)}))}]}class Vt extends n{constructor(e){super(),r(this,e,Ot,Ct,o,{mediaStream:0})}}function Rt(e){return t=>{let n={};try{e.validateSync(t,{abortEarly:!1})}catch(r){r instanceof ee&&r.inner.forEach((e=>{n[e.path]=e.message}))}return n}}function At(e){let t,n,r,o;const s=[Bt,jt],a=[];function i(e,t){return e[0]?0:1}return t=i(e),n=a[t]=s[t](e),{c(){n.c(),r=q()},l(e){n.l(e),r=q()},m(e,n){a[t].m(e,n),f(e,r,n),o=!0},p(e,o){let l=t;t=i(e),t===l?a[t].p(e,o):(U(),C(a[l],1,1,(()=>{a[l]=null})),P(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),D(n,1),n.m(r.parentNode,r))},i(e){o||(D(n),o=!0)},o(e){C(n),o=!1},d(e){a[t].d(e),e&&m(r)}}}function jt(e){let t;const n=e[5].default,r=S(n,e,e[4],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||16&o)&&T(r,n,e,e[4],o,null,null)},i(e){t||(D(r,e),t=!0)},o(e){C(r,e),t=!1},d(e){r&&r.d(e)}}}function Bt(e){let t;return{c(){t=a(e[0])},l(n){t=u(n,e[0])},m(e,n){f(e,t,n)},p(e,n){1&n&&h(t,e[0])},i:y,o:y,d(e){e&&m(t)}}}function Nt(e){let t,n,r=e[1]&&At(e);return{c(){r&&r.c(),t=q()},l(e){r&&r.l(e),t=q()},m(e,o){r&&r.m(e,o),f(e,t,o),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&D(r,1)):(r=At(e),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(U(),C(r,1,1,(()=>{r=null})),P())},i(e){n||(D(r),n=!0)},o(e){C(r),n=!1},d(e){r&&r.d(e),e&&m(t)}}}function Lt(e,t,n){let{$$slots:r={},$$scope:o}=t,{timeout:s=3e3}=t,{value:a}=t,i=!0;function l(){n(1,i=!0),setTimeout((()=>{n(1,i=!1),n(0,a=void 0)}),s)}return e.$$set=e=>{"timeout"in e&&n(2,s=e.timeout),"value"in e&&n(0,a=e.value),"$$scope"in e&&n(4,o=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&a&&l()},[a,i,s,l,o,r]}class Mt extends n{constructor(e){super(),r(this,e,Lt,Nt,o,{timeout:2,value:0,reset:3})}get reset(){return this.$$.ctx[3]}}function _t(e){let t,n,r,o,d,h,g;return t=new it({props:{label:"Email",type:"email",name:"email",value:e[6].values.email,error:e[6].errors.email,touched:e[6].touched.email,submitted:e[6].submitAttemptCount>0}}),t.$on("input",(function(){Q(e[6].handleInput)&&e[6].handleInput.apply(this,arguments)})),t.$on("blur",(function(){Q(e[6].handleBlur)&&e[6].handleBlur.apply(this,arguments)})),h=new Mt({props:{value:e[0]}}),{c(){J(t.$$.fragment),n=i(),r=s("button"),o=a("Invite"),d=i(),J(h.$$.fragment)},l(e){G(t.$$.fragment,e),n=$(e),r=l(e,"BUTTON",{});var s=c(r);o=u(s,"Invite"),s.forEach(m),d=$(e),G(h.$$.fragment,e)},m(e,s){z(t,e,s),f(e,n,s),f(e,r,s),p(r,o),f(e,d,s),z(h,e,s),g=!0},p(n,r){e=n;const o={};64&r&&(o.value=e[6].values.email),64&r&&(o.error=e[6].errors.email),64&r&&(o.touched=e[6].touched.email),64&r&&(o.submitted=e[6].submitAttemptCount>0),t.$set(o);const s={};1&r&&(s.value=e[0]),h.$set(s)},i(e){g||(D(t.$$.fragment,e),D(h.$$.fragment,e),g=!0)},o(e){C(t.$$.fragment,e),C(h.$$.fragment,e),g=!1},d(e){F(t,e),e&&m(n),e&&m(r),e&&m(d),F(h,e)}}}function qt(e){let t,n;return t=new oe({props:{$$slots:{default:[_t]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};193&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Ut(e){let t,n;return t=new te({props:{validate:e[2],initialValues:e[1],onSubmit:e[3],$$slots:{default:[qt,({props:e})=>({6:e}),({props:e})=>e?64:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,[n]){const r={};193&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Pt(e,t,n){const r=x("roomSocket"),o=Rt(ne().shape({email:re().required().email()}));let s="";return[s,{email:""},o,function(e){const t={email:e.email};r.emit("room:inviteMember",t,(e=>{"error"in e&&n(0,s=e.error.message)}))}]}class Ht extends n{constructor(e){super(),r(this,e,Pt,Ut,o,{})}}function Jt(e,t,n){const r=e.slice();return r[2]=t[n],r}function Gt(e){let t,n,r,o=e[2].email+"";return{c(){t=s("li"),n=a(o),r=i()},l(e){t=l(e,"LI",{});var s=c(t);n=u(s,o),r=$(s),s.forEach(m)},m(e,o){f(e,t,o),p(t,n),p(t,r)},p(e,t){1&t&&o!==(o=e[2].email+"")&&h(n,o)},d(e){e&&m(t)}}}function zt(e){let t,n,r,o,d,h,g,v,w,b;o=new Ht({});let y=e[0],x=[];for(let s=0;s<y.length;s+=1)x[s]=Gt(Jt(e,y,s));return{c(){t=s("h2"),n=a("Invite"),r=i(),J(o.$$.fragment),d=i(),h=s("h2"),g=a("Members"),v=i(),w=s("ul");for(let e=0;e<x.length;e+=1)x[e].c()},l(e){t=l(e,"H2",{});var s=c(t);n=u(s,"Invite"),s.forEach(m),r=$(e),G(o.$$.fragment,e),d=$(e),h=l(e,"H2",{});var a=c(h);g=u(a,"Members"),a.forEach(m),v=$(e),w=l(e,"UL",{});var i=c(w);for(let t=0;t<x.length;t+=1)x[t].l(i);i.forEach(m)},m(e,s){f(e,t,s),p(t,n),f(e,r,s),z(o,e,s),f(e,d,s),f(e,h,s),p(h,g),f(e,v,s),f(e,w,s);for(let t=0;t<x.length;t+=1)x[t].m(w,null);b=!0},p(e,[t]){if(1&t){let n;for(y=e[0],n=0;n<y.length;n+=1){const r=Jt(e,y,n);x[n]?x[n].p(r,t):(x[n]=Gt(r),x[n].c(),x[n].m(w,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=y.length}},i(e){b||(D(o.$$.fragment,e),b=!0)},o(e){C(o.$$.fragment,e),b=!1},d(e){e&&m(t),e&&m(r),F(o,e),e&&m(d),e&&m(h),e&&m(v),e&&m(w),N(x,e)}}}function Ft(e,t,n){const r=x("roomSocket");let o=[];return r.emit("room:memberList",(e=>{"result"in e&&n(0,o=e.result)})),r.on("room:newMember",(e=>{n(0,o=[e.user,...o])})),[o]}class Wt extends n{constructor(e){super(),r(this,e,Ft,zt,o,{})}}function Xt(e){let t,n,r;return{c(){t=a("Error. ("),n=a(e[3]),r=a(")")},l(o){t=u(o,"Error. ("),n=u(o,e[3]),r=u(o,")")},m(e,o){f(e,t,o),f(e,n,o),f(e,r,o)},p(e,t){8&t&&h(n,e[3])},i:y,o:y,d(e){e&&m(t),e&&m(n),e&&m(r)}}}function Kt(e){let t;return{c(){t=a("Connecting timeout.")},l(e){t=u(e,"Connecting timeout.")},m(e,n){f(e,t,n)},p:y,i:y,o:y,d(e){e&&m(t)}}}function Qt(e){let t,n,r,o,h,w,b,y,x,E,I,k,S,T,O,R,A;const j=[en,Zt],B=[];function N(e,t){return e[0]?1:0}n=N(e),r=B[n]=j[n](e);let L=e[0]&&rn(e);I=new Ce({});let M=e[5]&&on(e),_=e[1]&&an(e);return{c(){t=s("div"),r.c(),o=a("\r\n     "),h=s("a"),w=a("Members"),b=i(),y=s("div"),L&&L.c(),x=i(),E=s("div"),J(I.$$.fragment),k=i(),M&&M.c(),S=i(),_&&_.c(),T=q(),this.h()},l(e){t=l(e,"DIV",{class:!0});var n=c(t);r.l(n),o=u(n,"\r\n     "),h=l(n,"A",{href:!0});var s=c(h);w=u(s,"Members"),s.forEach(m),n.forEach(m),b=$(e),y=l(e,"DIV",{class:!0});var a=c(y);L&&L.l(a),x=$(a),E=l(a,"DIV",{class:!0});var i=c(E);G(I.$$.fragment,i),i.forEach(m),a.forEach(m),k=$(e),M&&M.l(e),S=$(e),_&&_.l(e),T=q(),this.h()},h(){d(h,"href",""),d(t,"class","actions svelte-12jpxu"),d(E,"class","chatcontainer svelte-12jpxu"),d(y,"class","layout svelte-12jpxu"),V(y,"layout--meeting",e[0])},m(r,s){f(r,t,s),B[n].m(t,null),p(t,o),p(t,h),p(h,w),f(r,b,s),f(r,y,s),L&&L.m(y,null),p(y,x),p(y,E),z(I,E,null),f(r,k,s),M&&M.m(r,s),f(r,S,s),_&&_.m(r,s),f(r,T,s),O=!0,R||(A=g(h,"click",v(e[11])),R=!0)},p(e,s){let a=n;n=N(e),n===a?B[n].p(e,s):(U(),C(B[a],1,1,(()=>{B[a]=null})),P(),r=B[n],r?r.p(e,s):(r=B[n]=j[n](e),r.c()),D(r,1),r.m(t,o)),e[0]?L?(L.p(e,s),1&s&&D(L,1)):(L=rn(e),L.c(),D(L,1),L.m(y,x)):L&&(U(),C(L,1,1,(()=>{L=null})),P()),1&s&&V(y,"layout--meeting",e[0]),e[5]?M?(M.p(e,s),32&s&&D(M,1)):(M=on(e),M.c(),D(M,1),M.m(S.parentNode,S)):M&&(U(),C(M,1,1,(()=>{M=null})),P()),e[1]?_?2&s&&D(_,1):(_=an(e),_.c(),D(_,1),_.m(T.parentNode,T)):_&&(U(),C(_,1,1,(()=>{_=null})),P())},i(e){O||(D(r),D(L),D(I.$$.fragment,e),D(M),D(_),O=!0)},o(e){C(r),C(L),C(I.$$.fragment,e),C(M),C(_),O=!1},d(e){e&&m(t),B[n].d(),e&&m(b),e&&m(y),L&&L.d(),F(I),e&&m(k),M&&M.d(e),e&&m(S),_&&_.d(e),e&&m(T),R=!1,A()}}}function Yt(e){let t;return{c(){t=a("Connecting...")},l(e){t=u(e,"Connecting...")},m(e,n){f(e,t,n)},p:y,i:y,o:y,d(e){e&&m(t)}}}function Zt(e){let t,n;return t=new Re({props:{$$slots:{default:[tn]},$$scope:{ctx:e}}}),t.$on("click",e[8]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function en(e){let t,n;return t=new Re({props:{$$slots:{default:[nn]},$$scope:{ctx:e}}}),t.$on("click",e[10]),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function tn(e){let t;return{c(){t=a("Leave")},l(e){t=u(e,"Leave")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function nn(e){let t;return{c(){t=a("Join Meeting")},l(e){t=u(e,"Join Meeting")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function rn(e){let t,n,r;return n=new Vt({props:{mediaStream:e[4]}}),n.$on("error",e[9]),{c(){t=s("div"),J(n.$$.fragment),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=c(t);G(n.$$.fragment,r),r.forEach(m),this.h()},h(){d(t,"class","meeting svelte-12jpxu")},m(e,o){f(e,t,o),z(n,t,null),r=!0},p(e,t){const r={};16&t&&(r.mediaStream=e[4]),n.$set(r)},i(e){r||(D(n.$$.fragment,e),r=!0)},o(e){C(n.$$.fragment,e),r=!1},d(e){e&&m(t),F(n)}}}function on(e){let t,n;return t=new Be({props:{isOpen:!0,$$slots:{default:[sn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function sn(e){let t,n,r;return n=new ht({}),n.$on("joinAction",e[13]),{c(){t=s("div"),J(n.$$.fragment),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=c(t);G(n.$$.fragment,r),r.forEach(m),this.h()},h(){d(t,"class","modalcontent svelte-12jpxu")},m(e,o){f(e,t,o),z(n,t,null),r=!0},p:y,i(e){r||(D(n.$$.fragment,e),r=!0)},o(e){C(n.$$.fragment,e),r=!1},d(e){e&&m(t),F(n)}}}function an(e){let t,n;return t=new Be({props:{isOpen:!0,$$slots:{default:[ln]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function ln(e){let t,n,r;return n=new Wt({}),{c(){t=s("div"),J(n.$$.fragment),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=c(t);G(n.$$.fragment,r),r.forEach(m),this.h()},h(){d(t,"class","modalcontent svelte-12jpxu")},m(e,o){f(e,t,o),z(n,t,null),r=!0},i(e){r||(D(n.$$.fragment,e),r=!0)},o(e){C(n.$$.fragment,e),r=!1},d(e){e&&m(t),F(n)}}}function cn(e){let t,n,r,o;const s=[Yt,Qt,Kt,Xt],a=[];function i(e,t){return"connecting"===e[2]?0:"connected"===e[2]?1:"timeout"===e[2]?2:"error"===e[2]?3:-1}return~(t=i(e))&&(n=a[t]=s[t](e)),{c(){n&&n.c(),r=q()},l(e){n&&n.l(e),r=q()},m(e,n){~t&&a[t].m(e,n),f(e,r,n),o=!0},p(e,[o]){let l=t;t=i(e),t===l?~t&&a[t].p(e,o):(n&&(U(),C(a[l],1,1,(()=>{a[l]=null})),P()),~t?(n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),D(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(D(n),o=!0)},o(e){C(n),o=!1},d(e){~t&&a[t].d(e),e&&m(r)}}}function un(e,n,r){let o,s,a;se(e,ye,(e=>r(15,a=e)));const i=ae();se(e,i,(e=>r(14,s=e)));const{id:l}=s;let c,u=!1,$=!1,m=!1,d="connecting";const f=t(`ws://${we}/room-${l}`,{timeout:5e3,transports:["websocket"],auth:{token:a}});let p;function h(e){r(4,p=e),r(0,m=!0),r(12,u=!1)}ie("roomSocket",f),f.on("connect",(()=>r(2,d="connected"))),f.on("connect_error",(e=>{r(2,d="error"),r(3,c=e.message)})),f.on("connect_timeout ",(()=>r(2,d="timeout")));return e.$$.update=()=>{4097&e.$$.dirty&&r(5,o=!m&&u)},[m,$,d,c,p,o,i,h,function(){r(0,m=!1),p.getTracks().forEach((e=>e.stop())),r(4,p=void 0)},function(e){r(0,m=!1),alert(`Error: ${e.detail}`)},function(){r(12,u=!u)},function(){r(1,$=!$)},u,e=>h(e.detail)]}class $n extends n{constructor(e){super(),r(this,e,un,cn,o,{})}}const mn=le().shape({email:ce().required().email(),password:ce().required().min(6)});le().shape({email:ce().required().email(),password:ce().required()}),le().shape({}),le().shape({}),le().shape({email:ce().email().required()});const dn=le().shape({name:ce().required()});function fn(e){let t;return{c(){t=a("Create Room")},l(e){t=u(e,"Create Room")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function pn(e){let t,n,r,o,a,u,d,p,h,g,v,w;function b(t){e[4](t)}t=new it({props:{name:"name",value:e[6].values.name,error:e[6].errors.name,touched:e[6].touched.name,submitted:e[6].submitAttemptCount>0}}),t.$on("input",(function(){Q(e[6].handleInput)&&e[6].handleInput.apply(this,arguments)})),t.$on("blur",(function(){Q(e[6].handleBlur)&&e[6].handleBlur.apply(this,arguments)})),r=new Re({props:{$$slots:{default:[fn]},$$scope:{ctx:e}}});let y={};return void 0!==e[0]&&(y.value=e[0]),g=new Mt({props:y}),k.push((()=>$e(g,"value",b))),{c(){J(t.$$.fragment),n=i(),J(r.$$.fragment),o=i(),a=s("br"),u=i(),d=s("br"),p=i(),h=s("div"),J(g.$$.fragment)},l(e){G(t.$$.fragment,e),n=$(e),G(r.$$.fragment,e),o=$(e),a=l(e,"BR",{}),u=$(e),d=l(e,"BR",{}),p=$(e),h=l(e,"DIV",{});var s=c(h);G(g.$$.fragment,s),s.forEach(m)},m(e,s){z(t,e,s),f(e,n,s),z(r,e,s),f(e,o,s),f(e,a,s),f(e,u,s),f(e,d,s),f(e,p,s),f(e,h,s),z(g,h,null),w=!0},p(n,o){e=n;const s={};64&o&&(s.value=e[6].values.name),64&o&&(s.error=e[6].errors.name),64&o&&(s.touched=e[6].touched.name),64&o&&(s.submitted=e[6].submitAttemptCount>0),t.$set(s);const a={};128&o&&(a.$$scope={dirty:o,ctx:e}),r.$set(a);const i={};!v&&1&o&&(v=!0,i.value=e[0],me((()=>v=!1))),g.$set(i)},i(e){w||(D(t.$$.fragment,e),D(r.$$.fragment,e),D(g.$$.fragment,e),w=!0)},o(e){C(t.$$.fragment,e),C(r.$$.fragment,e),C(g.$$.fragment,e),w=!1},d(e){F(t,e),e&&m(n),F(r,e),e&&m(o),e&&m(a),e&&m(u),e&&m(d),e&&m(p),e&&m(h),F(g)}}}function hn(e){let t,n;return t=new oe({props:{$$slots:{default:[pn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};193&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function gn(e){let t,n;return t=new te({props:{validate:e[2],initialValues:e[1],onSubmit:e[3],$$slots:{default:[hn,({props:e})=>({6:e}),({props:e})=>e?64:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,[n]){const r={};193&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function vn(e,t,n){let r;se(e,Ee,(e=>n(5,r=e)));const o=Rt(dn);let s="";return[s,{name:""},o,function(e){const t={name:e.name};r.emit("room:create",t,(e=>{"error"in e&&n(0,s=e.error.message),n(0,s="Ok. Created."),setTimeout((()=>n(0,s="")),3e3)}))},function(e){s=e,n(0,s)}]}le().shape({}),le().shape({message:ce().required(),file:le({data:ue().test({test:e=>e instanceof Buffer}),extension:ce().required(),name:ce().required()}).notRequired().default(void 0)});class wn extends n{constructor(e){super(),r(this,e,vn,gn,o,{})}}function bn(e,t,n){const r=e.slice();return r[3]=t[n],r}function yn(e){let t,n=e[3].name+"";return{c(){t=a(n)},l(e){t=u(e,n)},m(e,n){f(e,t,n)},p(e,r){1&r&&n!==(n=e[3].name+"")&&h(t,n)},d(e){e&&m(t)}}}function xn(e,t){let n,r,o,a;return r=new de({props:{to:`/room/${t[3]._id}`,$$slots:{default:[yn]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=s("li"),J(r.$$.fragment),o=i(),this.h()},l(e){n=l(e,"LI",{class:!0});var t=c(n);G(r.$$.fragment,t),o=$(t),t.forEach(m),this.h()},h(){d(n,"class","svelte-m64f6h"),this.first=n},m(e,t){f(e,n,t),z(r,n,null),p(n,o),a=!0},p(e,n){t=e;const o={};1&n&&(o.to=`/room/${t[3]._id}`),65&n&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(e){a||(D(r.$$.fragment,e),a=!0)},o(e){C(r.$$.fragment,e),a=!1},d(e){e&&m(n),F(r)}}}function En(e){let t,n,r=[],o=new Map,a=e[0];const i=e=>e[3]._id;for(let s=0;s<a.length;s+=1){let t=bn(e,a,s),n=i(t);o.set(n,r[s]=xn(n,t))}return{c(){t=s("ul");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=l(e,"UL",{class:!0});var n=c(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach(m),this.h()},h(){d(t,"class","svelte-m64f6h")},m(e,o){f(e,t,o);for(let n=0;n<r.length;n+=1)r[n].m(t,null);n=!0},p(e,[n]){1&n&&(a=e[0],U(),r=w(r,n,i,1,e,a,o,t,Y,xn,null,bn),P())},i(e){if(!n){for(let e=0;e<a.length;e+=1)D(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)C(r[t]);n=!1},d(e){e&&m(t);for(let t=0;t<r.length;t+=1)r[t].d()}}}function In(e,t,n){let r;se(e,Ee,(e=>n(1,r=e)));let o=[];return r.emit("room:list",{},(e=>{n(0,o=e.result)})),r.on("room:new",(e=>{n(0,o=[...o,e.room])})),[o]}class kn extends n{constructor(e){super(),r(this,e,In,En,o,{})}}function Sn(e){let t,n,r,o,h,g,v,w;return h=new kn({}),v=new wn({}),{c(){t=s("div"),n=s("h1"),r=a("Rooms"),o=i(),J(h.$$.fragment),g=i(),J(v.$$.fragment),this.h()},l(e){t=l(e,"DIV",{class:!0});var s=c(t);n=l(s,"H1",{});var a=c(n);r=u(a,"Rooms"),a.forEach(m),o=$(s),G(h.$$.fragment,s),g=$(s),G(v.$$.fragment,s),s.forEach(m),this.h()},h(){d(t,"class","layout svelte-1dlok9f")},m(e,s){f(e,t,s),p(t,n),p(n,r),p(t,o),z(h,t,null),p(t,g),z(v,t,null),w=!0},p:y,i(e){w||(D(h.$$.fragment,e),D(v.$$.fragment,e),w=!0)},o(e){C(h.$$.fragment,e),C(v.$$.fragment,e),w=!1},d(e){e&&m(t),F(h),F(v)}}}class Tn extends n{constructor(e){super(),r(this,e,null,Sn,o,{})}}function Dn(e){let t;return{c(){t=a("Login")},l(e){t=u(e,"Login")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function Cn(e){let t,n,r,o,s,a,l,c,u;function d(t){e[4](t)}t=new it({props:{label:"Email",type:"email",name:"email",value:e[8].values.email,error:e[8].errors.email,touched:e[8].touched.email,submitted:e[8].submitAttemptCount>0}}),t.$on("input",(function(){Q(e[8].handleInput)&&e[8].handleInput.apply(this,arguments)})),t.$on("blur",(function(){Q(e[8].handleBlur)&&e[8].handleBlur.apply(this,arguments)})),r=new it({props:{label:"Password",type:"password",name:"password",value:e[8].values.password,error:e[8].errors.password,touched:e[8].touched.password,submitted:e[8].submitAttemptCount>0}}),r.$on("input",(function(){Q(e[8].handleInput)&&e[8].handleInput.apply(this,arguments)})),r.$on("blur",(function(){Q(e[8].handleBlur)&&e[8].handleBlur.apply(this,arguments)})),s=new Re({props:{$$slots:{default:[Dn]},$$scope:{ctx:e}}});let p={};return void 0!==e[0]&&(p.value=e[0]),l=new Mt({props:p}),k.push((()=>$e(l,"value",d))),{c(){J(t.$$.fragment),n=i(),J(r.$$.fragment),o=i(),J(s.$$.fragment),a=i(),J(l.$$.fragment)},l(e){G(t.$$.fragment,e),n=$(e),G(r.$$.fragment,e),o=$(e),G(s.$$.fragment,e),a=$(e),G(l.$$.fragment,e)},m(e,i){z(t,e,i),f(e,n,i),z(r,e,i),f(e,o,i),z(s,e,i),f(e,a,i),z(l,e,i),u=!0},p(n,o){e=n;const a={};256&o&&(a.value=e[8].values.email),256&o&&(a.error=e[8].errors.email),256&o&&(a.touched=e[8].touched.email),256&o&&(a.submitted=e[8].submitAttemptCount>0),t.$set(a);const i={};256&o&&(i.value=e[8].values.password),256&o&&(i.error=e[8].errors.password),256&o&&(i.touched=e[8].touched.password),256&o&&(i.submitted=e[8].submitAttemptCount>0),r.$set(i);const u={};512&o&&(u.$$scope={dirty:o,ctx:e}),s.$set(u);const $={};!c&&1&o&&(c=!0,$.value=e[0],me((()=>c=!1))),l.$set($)},i(e){u||(D(t.$$.fragment,e),D(r.$$.fragment,e),D(s.$$.fragment,e),D(l.$$.fragment,e),u=!0)},o(e){C(t.$$.fragment,e),C(r.$$.fragment,e),C(s.$$.fragment,e),C(l.$$.fragment,e),u=!1},d(e){F(t,e),e&&m(n),F(r,e),e&&m(o),F(s,e),e&&m(a),F(l,e)}}}function On(e){let t,n;return t=new oe({props:{$$slots:{default:[Cn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};769&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Vn(e){let t,n;return t=new te({props:{validate:e[2],initialValues:e[1],onSubmit:e[3],$$slots:{default:[On,({props:e})=>({8:e}),({props:e})=>e?256:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,[n]){const r={};769&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Rn(e,t,n){let r,o;se(e,be,(e=>n(5,r=e))),se(e,ye,(e=>n(6,o=e)));const s=Rt(ne().shape({email:re().required().email(),password:re().required()}));let a="";return[a,{email:"",password:""},s,function(e){const t={email:e.email,password:e.password};r.emit("user:authenticate",t,(e=>{"error"in e?n(0,a=e.error.message):(fe(ye,o=e.result.token,o),n(0,a="Ok. Logging in..."))}))},function(e){a=e,n(0,a)}]}class An extends n{constructor(e){super(),r(this,e,Rn,Vn,o,{})}}function jn(e){let t;return{c(){t=a("Register")},l(e){t=u(e,"Register")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function Bn(e){let t,n,r,o,s,a,l,c,u,d,p;function h(t){e[4](t)}t=new it({props:{label:"Email",type:"email",name:"email",value:e[7].values.email,error:e[7].errors.email,touched:e[7].touched.email,submitted:e[7].submitAttemptCount>0}}),t.$on("input",(function(){Q(e[7].handleInput)&&e[7].handleInput.apply(this,arguments)})),t.$on("blur",(function(){Q(e[7].handleBlur)&&e[7].handleBlur.apply(this,arguments)})),r=new it({props:{label:"Password",type:"password",name:"password",value:e[7].values.password,error:e[7].errors.password,touched:e[7].touched.password,submitted:e[7].submitAttemptCount>0}}),r.$on("input",(function(){Q(e[7].handleInput)&&e[7].handleInput.apply(this,arguments)})),r.$on("blur",(function(){Q(e[7].handleBlur)&&e[7].handleBlur.apply(this,arguments)})),s=new it({props:{label:"Repeat password",type:"password",name:"passwordRepeat",value:e[7].values.passwordRepeat,error:e[7].errors.passwordRepeat,touched:e[7].touched.passwordRepeat,submitted:e[7].submitAttemptCount>0}}),s.$on("input",(function(){Q(e[7].handleInput)&&e[7].handleInput.apply(this,arguments)})),s.$on("blur",(function(){Q(e[7].handleBlur)&&e[7].handleBlur.apply(this,arguments)})),l=new Re({props:{$$slots:{default:[jn]},$$scope:{ctx:e}}});let g={};return void 0!==e[0]&&(g.value=e[0]),u=new Mt({props:g}),k.push((()=>$e(u,"value",h))),{c(){J(t.$$.fragment),n=i(),J(r.$$.fragment),o=i(),J(s.$$.fragment),a=i(),J(l.$$.fragment),c=i(),J(u.$$.fragment)},l(e){G(t.$$.fragment,e),n=$(e),G(r.$$.fragment,e),o=$(e),G(s.$$.fragment,e),a=$(e),G(l.$$.fragment,e),c=$(e),G(u.$$.fragment,e)},m(e,i){z(t,e,i),f(e,n,i),z(r,e,i),f(e,o,i),z(s,e,i),f(e,a,i),z(l,e,i),f(e,c,i),z(u,e,i),p=!0},p(n,o){e=n;const a={};128&o&&(a.value=e[7].values.email),128&o&&(a.error=e[7].errors.email),128&o&&(a.touched=e[7].touched.email),128&o&&(a.submitted=e[7].submitAttemptCount>0),t.$set(a);const i={};128&o&&(i.value=e[7].values.password),128&o&&(i.error=e[7].errors.password),128&o&&(i.touched=e[7].touched.password),128&o&&(i.submitted=e[7].submitAttemptCount>0),r.$set(i);const c={};128&o&&(c.value=e[7].values.passwordRepeat),128&o&&(c.error=e[7].errors.passwordRepeat),128&o&&(c.touched=e[7].touched.passwordRepeat),128&o&&(c.submitted=e[7].submitAttemptCount>0),s.$set(c);const $={};256&o&&($.$$scope={dirty:o,ctx:e}),l.$set($);const m={};!d&&1&o&&(d=!0,m.value=e[0],me((()=>d=!1))),u.$set(m)},i(e){p||(D(t.$$.fragment,e),D(r.$$.fragment,e),D(s.$$.fragment,e),D(l.$$.fragment,e),D(u.$$.fragment,e),p=!0)},o(e){C(t.$$.fragment,e),C(r.$$.fragment,e),C(s.$$.fragment,e),C(l.$$.fragment,e),C(u.$$.fragment,e),p=!1},d(e){F(t,e),e&&m(n),F(r,e),e&&m(o),F(s,e),e&&m(a),F(l,e),e&&m(c),F(u,e)}}}function Nn(e){let t,n;return t=new oe({props:{$$slots:{default:[Bn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,n){const r={};385&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Ln(e){let t,n;return t=new te({props:{validate:e[2],initialValues:e[1],onSubmit:e[3],$$slots:{default:[Nn,({props:e})=>({7:e}),({props:e})=>e?128:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,[n]){const r={};385&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Mn(e,t,n){let r;se(e,be,(e=>n(5,r=e)));let o="";const s=Rt(mn.concat(ne({passwordRepeat:re().oneOf([pe("password")],"Passwords must match.")})));return[o,{email:"",password:"",passwordRepeat:""},s,function(e){const t={email:e.email,password:e.password};r.emit("user:register",t,(e=>{console.log(e),n(0,o="error"in e?e.error.message:"Ok. Registered.")}))},function(e){o=e,n(0,o)}]}class _n extends n{constructor(e){super(),r(this,e,Mn,Ln,o,{})}}function qn(e){let t,n,r,o,h,g,v,w,b,y,x,E,I,k;return h=new An({}),I=new _n({}),{c(){t=s("div"),n=s("h1"),r=a("Login"),o=i(),J(h.$$.fragment),g=i(),v=s("hr"),w=i(),b=s("div"),y=s("h2"),x=a("Register"),E=i(),J(I.$$.fragment),this.h()},l(e){t=l(e,"DIV",{class:!0});var s=c(t);n=l(s,"H1",{});var a=c(n);r=u(a,"Login"),a.forEach(m),o=$(s),G(h.$$.fragment,s),s.forEach(m),g=$(e),v=l(e,"HR",{class:!0}),w=$(e),b=l(e,"DIV",{class:!0});var i=c(b);y=l(i,"H2",{});var d=c(y);x=u(d,"Register"),d.forEach(m),E=$(i),G(I.$$.fragment,i),i.forEach(m),this.h()},h(){d(t,"class","modalcontent svelte-1yfrobp"),d(v,"class","svelte-1yfrobp"),d(b,"class","modalcontent svelte-1yfrobp")},m(e,s){f(e,t,s),p(t,n),p(n,r),p(t,o),z(h,t,null),f(e,g,s),f(e,v,s),f(e,w,s),f(e,b,s),p(b,y),p(y,x),p(b,E),z(I,b,null),k=!0},i(e){k||(D(h.$$.fragment,e),D(I.$$.fragment,e),k=!0)},o(e){C(h.$$.fragment,e),C(I.$$.fragment,e),k=!1},d(e){e&&m(t),F(h),e&&m(g),e&&m(v),e&&m(w),e&&m(b),F(I)}}}function Un(e){let t,n;return t=new Be({props:{isOpen:!0,$$slots:{default:[qn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}class Pn extends n{constructor(e){super(),r(this,e,null,Un,o,{})}}function Hn(e){let t,n;return t=new Pn({}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},p:y,i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Jn(e){let t,n,r,o,h,w,b;return o=new ge({props:{$$slots:{default:[Fn]},$$scope:{ctx:e}}}),{c(){t=s("a"),n=a("Logout"),r=i(),J(o.$$.fragment),this.h()},l(e){t=l(e,"A",{class:!0,href:!0});var s=c(t);n=u(s,"Logout"),s.forEach(m),r=$(e),G(o.$$.fragment,e),this.h()},h(){d(t,"class","logout svelte-1bx6xjv"),d(t,"href","")},m(s,a){f(s,t,a),p(t,n),f(s,r,a),z(o,s,a),h=!0,w||(b=g(t,"click",v(e[1])),w=!0)},p(e,t){const n={};4&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i(e){h||(D(o.$$.fragment,e),h=!0)},o(e){C(o.$$.fragment,e),h=!1},d(e){e&&m(t),e&&m(r),F(o,e),w=!1,b()}}}function Gn(e){let t,n;return t=new Tn({}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function zn(e){let t,n;return t=new $n({}),{c(){J(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,r){z(t,e,r),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Fn(e){let t,n,r,o;return t=new ve({props:{path:"/",$$slots:{default:[Gn]},$$scope:{ctx:e}}}),r=new ve({props:{path:"/room/:id",$$slots:{default:[zn]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),n=i(),J(r.$$.fragment)},l(e){G(t.$$.fragment,e),n=$(e),G(r.$$.fragment,e)},m(e,s){z(t,e,s),f(e,n,s),z(r,e,s),o=!0},p(e,n){const o={};4&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const s={};4&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s)},i(e){o||(D(t.$$.fragment,e),D(r.$$.fragment,e),o=!0)},o(e){C(t.$$.fragment,e),C(r.$$.fragment,e),o=!1},d(e){F(t,e),e&&m(n),F(r,e)}}}function Wn(e){let t,n,r,o;const a=[Jn,Hn],i=[];function u(e,t){return e[0]?0:1}return n=u(e),r=i[n]=a[n](e),{c(){t=s("main"),r.c()},l(e){t=l(e,"MAIN",{});var n=c(t);r.l(n),n.forEach(m)},m(e,r){f(e,t,r),i[n].m(t,null),o=!0},p(e,[o]){let s=n;n=u(e),n===s?i[n].p(e,o):(U(),C(i[s],1,1,(()=>{i[s]=null})),P(),r=i[n],r?r.p(e,o):(r=i[n]=a[n](e),r.c()),D(r,1),r.m(t,null))},i(e){o||(D(r),o=!0)},o(e){C(r),o=!1},d(e){e&&m(t),i[n].d()}}}function Xn(e,t,n){let r;return se(e,xe,(e=>n(0,r=e))),[r,function(){window.sessionStorage.setItem("token",null),Ee.set(null),xe.set(!1),he("/")}]}new class extends n{constructor(e){super(),r(this,e,Xn,Wn,o,{})}}({target:document.getElementById("app")});
